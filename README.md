# EscapeDiary

# ğŸ“Œ Table Of Contents

- [ğŸ“– Introduction](#-introduction)
- [ğŸ™‹ My Role](#-my-role)
- [ğŸ” Detail](#-detail)
- [ğŸ’¡ Review](#-review)
- [âœ” To Do List](#-to-do-list)

<br />
<br />
<br />

# ğŸ“– Introduction

### 1. í”„ë¡œì íŠ¸ ê°œìš”

ë°©íƒˆì¶œ í‰ì  í›„ê¸° ë¸”ë¡œê·¸
<br />

### 2. ê°œë°œ í™˜ê²½
<div align=left> 
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=white">
  <img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=node.js&logoColor=white">
  <img src="https://img.shields.io/badge/amazon ec2-FF9900?style=for-the-badge&logo=amazon ec2&logoColor=white">
  <img src="https://img.shields.io/badge/pm2-2B037A?style=for-the-badge&logo=pm2&logoColor=white">
  <br>
  
  <img src="https://img.shields.io/badge/json web tokens-000000?style=for-the-badge&logo=json web tokens&logoColor=white">
  <img src="https://img.shields.io/badge/sequelize-52B0E7?style=for-the-badge&logo=sequelize&logoColor=white">
  <br>
  
  <img src="https://img.shields.io/badge/express-000000?style=for-the-badge&logo=express&logoColor=white">
  <img src="https://img.shields.io/badge/github actions-2088FF?style=for-the-badge&logo=github actions&logoColor=white">
  <img src="https://img.shields.io/badge/amazon rds-527FFF?style=for-the-badge&logo=amazon rds&logoColor=white">
  <br>
  
  <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
  <img src="https://img.shields.io/badge/amazon s3-569A31?style=for-the-badge&logo=amazon s3&logoColor=white">
  <img src="https://img.shields.io/badge/amazon%20codedeploy-569A31?style=for-the-badge&logo=amazoncodedeploy&logoColor=white" alt="Amazon CodeDeploy">

</div>

### 3. íŒ€ ë ˆí¼ëŸ°ìŠ¤ ì£¼ì†Œ
[Notion](https://www.notion.so/5-EscapeDiary-9637b15e1d27465ab820e2127e152b45)

[FrontEnd GitHub](https://github.com/hyeon12/escapediary-FE/tree/main)

### 4. í”„ë¡œì íŠ¸ ë‚´ìš©

<img src="https://github.com/hyeon12/escapediary-FE/assets/56420106/9dc5c151-0b8f-4d06-9b81-1092a6b50edc" width="300" height="500"/>

<img src="https://github.com/hyeon12/escapediary-FE/assets/56420106/37749b8e-9a78-4556-931b-959596badddc" width="300" height="500"/>

ë°©íƒˆì¶œì„ ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•œ **ë°©íƒˆì¶œ í›„ê¸° ì›¹ì‚¬ì´íŠ¸**
ë°©íƒˆì¶œì„ ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒë“¤ë¼ë¦¬ ë°©íƒˆì¶œì— ëŒ€í•œ í›„ê¸°ë¥¼ ë‚¨ê¸°ê³  í‰ì ì„ ë§¤ê²¨
ì„œë¡œì—ê²Œ ë°©íƒˆì¶œì„ ì¶”ì²œí•˜ê³  ì˜ê²¬ì„ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ì›¹ì‚¬ì´íŠ¸

<br/>

#### ì£¼ìš” íŠ¹ì§•

- â­ ë°©íƒˆì¶œ í‰ê°€ë¥¼ í•œëˆˆì—
  - ë°©íƒˆì¶œì„ ì˜ ëª¨ë¥´ëŠ” ì‚¬ëŒë„ í•œëˆˆì— ë³¼ìˆ˜ ìˆëŠ” ë³„ í‰ì 
- ğŸ˜Š ë¶€ë‹´ì—†ì´ ì›¹ì‚¬ì´íŠ¸ ë°©ë¬¸
  - ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì•„ë„ ê²Œì‹œë¬¼ ì¡°íšŒê°€ ê°€ëŠ¥
- ğŸš« ë¶„íƒ•ëŸ¬ëŠ” ì¶œì… ê¸ˆì§€!
  - ë¡œê·¸ì¸ì„ í•œ ì‚¬ëŒë§Œ ê²Œì‹œë¬¼ ì‘ì„± ê°€ëŠ¥
- ğŸ‘® ê²Œì‹œë¬¼ ë³´í˜¸
  - ìì‹ ì´ ì‘ì„±í•œ ê²Œì‹œë¬¼ë§Œ ì‚­ì œ, ìˆ˜ì • ê°€ëŠ¥
- ğŸ‘â€ğŸ—¨ ì–¸ì œ ì–´ë””ì„œë‚˜ ì›¹ì‚¬ì´íŠ¸ì—ì„œ í™•ì¸ ê°€ëŠ¥
  - í…ŒìŠ¤í¬íƒ‘, íƒœë¸”ë¦¿, ìŠ¤ë§ˆíŠ¸í° ë°˜ì‘í˜• êµ¬í˜„

<br />
<br />
<br />

# ğŸ™‹ My Role

### 1. ë‹´ë‹¹ ì—…ë¬´

![ì‹ ì„±ìœ¤](https://github.com/hyeon12/reactH99TestThree/assets/56420106/4dd285c0-0048-4c85-bf32-81ceb7ec6a02) <img src="https://github.com/hyeon12/escapediary-FE/assets/56420106/d0eed55d-76c8-4e65-a276-7c6aab9a5ab6" width="100" height="150"/> ![image](https://github.com/hyeon12/reactH99TestThree/assets/56420106/be2a43b6-b7a6-4a7f-94f7-be23a8b574f1) ![Alt text](image.png)

- ğŸ’– ì‹ ì„±ìœ¤: ë°±ì—”ë“œ ğŸ’–
- ğŸ’– ê¹€ìŠ¹í›ˆ: ë°±ì—”ë“œ ğŸ’–
- ğŸ’– ì´ì†Œí˜„: í”„ë¡ íŠ¸ ğŸ’–
- ğŸ’– ì†ê·œë¦¬: í”„ë¡ íŠ¸ ğŸ’–
  <br/>

#### ì£¼ìš” íŠ¹ì§•

- ì‹ ì„±ìœ¤: ë‚˜ëŠ”ì•¼ ë©‹ìŸì´ ì¡°ì¥, ë§ˆìŠ¤í„°í”¼ìŠ¤, ì½”ë”©ì¢€ë¹„
- ê¹€ìŠ¹í›ˆ: ì‹ ì„±ìœ¤ ì§ì† 1ë²ˆ ëŒ€ì¥
- ì´ì†Œí˜„: 5ì¡° ìì¹­ ë¶„ìœ„ê¸° ë©”ì´ì»¤
- ì†ê·œë¦¬: ê²¸ì† = ê·œë¦¬

#### ë°±ì—”ë“œ ì—…ë¬´ ì—­í• 

| ì´ë¦„ | ë‹´ë‹¹ íŒŒíŠ¸ |
| --- | --------- |
| ì‹ ì„±ìœ¤ | CI/CD êµ¬ì¶• ë° ë°°í¬ ì•ˆì •í™”, Https ì—°ê²° |
| ê¹€ìŠ¹í›ˆ | íšŒì›ê°€ì…, ë¡œê·¸ì¸, ê²Œì‹œê¸€ CRUD ê¸°ëŠ¥ êµ¬í˜„ |


<br />
<br />
<br />

# ğŸ” Detail

### ì£¼ìš” ì½”ë“œ

- JWTí† í° ìƒì„±

  ```js
  router.post('/login', async (req, res) => {
  try {
    const { id, password } = req.body;
    const existUser = await Users.findOne({ where: { id } });
    // id ë¹„ë°€ë²ˆí˜¸ í™•ì¸
    if (!existUser || password !== existUser.password) {
      return res
        .status(400)
        .json({ message: ' idì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.' });
    }

    // í† í° ë°œê¸‰
    const token = jwt.sign({ id: existUser.id }, 'escape');
    res.cookie('Authorization', `Bearer ${token}`, {
      httpOnly: true,
      sameSite: 'none',
      secure: true,
      path: '/',
    });
    return res.status(200).json({ message: token });
  } catch (error) {
    console.log(error);
    return res.status(400).json({ message: 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.' });
  }
  });

  ```
- JWTí† í° ê²€ì¦

  ```js
  const verifyToken = async (req, res, next) => {
    console.log(req.cookies);
  
    if (!req.cookies || typeof req.cookies !== 'object') {
      console.error('ì¿ í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
      res.status(401).send({ errorMessage: 'ì¿ í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' });
      return;
    }

  const { Authorization } = req.cookies;
  const [authType, authToken] = (Authorization ?? '').split(' ');
  try {
    if (!authToken) {
      res.status(401).send({
        errorMessage: 'ì˜¬ë°”ë¥´ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤.',
      });
      return;
    }
    if (authType !== 'Bearer') {
      res.status(402).send({
        errorMessage: 'ì¿ í‚¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.',
      });
    }
  ```

  ì¿ í‚¤ê°€ ì—†ê±°ë‚˜ ì¿ í‚¤ì˜ íƒ€ì…ì´ ê°ì²´ íƒ€ì…ì´ ì•„ë‹Œ ê²½ìš°ëŠ” ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ë„ë¡ ì‘ì„±.
  


- ë¯¸ë“¤ì›¨ì–´ ìˆœì„œ

  ```js
  app.use(
  cors({
    origin: [
      'https://escapediary-fe-snowy.vercel.app',
      'https://escapediary-fe.vercel.app',
    ],
    credentials: true,
  })
  );

  
  app.use(express.json());
  app.use(express.urlencoded({ extended: false }));
  app.use(cookieParser());
  app.use('/api', routes);
  ```

  '/api' ë¡œ ë“¤ì–´ê°€ê¸°ì „ì— 'cors ë¯¸ë“¤ì›¨ì–´'ë¥¼ ì ìš©í•´ì•¼ í•¨.

    <br>



<!-- # ğŸ’¡ Review

### 1. í›„ê¸°

- í”„ë¡œì íŠ¸ ì™„ë£Œ í›„ **í›„ê¸°**ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
- **í˜‘ì—…**ì„ í†µí•´ ì–»ì€ **ê³ ì°°**ì„ ìœ„ì£¼ë¡œ ê¸°ì…í•©ë‹ˆë‹¤.

<br />
<br />

### 2. ì½”ë“œ ë¦¬ë·°

- ë³´ì™„ì ì´ ìˆëŠ” ì½”ë“œë¥¼ **ë¦¬ë·°**í•©ë‹ˆë‹¤.

<br />
<br />
<br /> -->

# âœ” To Do List

- [x] **í•„ìˆ˜ ê¸°ëŠ¥**

  - [x] ê²Œì‹œê¸€ ì¡°íšŒ
  - [x] ê²Œì‹œê¸€ ìƒì„±
  - [x] ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°

  <br />

- [x] **1ì°¨ ê¸°ëŠ¥êµ¬í˜„**

  - [x] íšŒì›ê°€ì…
  - [x] ë¡œê·¸ì¸

  <br />

- [x] **2ì°¨ ê¸°ëŠ¥êµ¬í˜„**

  - [x] ê²Œì‹œê¸€ ìˆ˜ì •
  - [x] ê²Œì‹œë¬¼ ì‚­ì œ

  <br />


